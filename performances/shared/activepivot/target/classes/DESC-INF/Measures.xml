<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<measures xmlns="http://www.quartetfs.com"
	xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.quartetfs.com ../activepivot-types.xsd">
	
	<!--Your measures and postprocessors here-->


	<measure name="History Volume Sum" aggregation="SUM"  field="History Volume"/>
	<measure name="Number of Stock Sum" aggregation="SUM"  field="Number of stocks"/>
	<measure name="Number of stocks" aggregation="SUM"  field="Number of stocks"/>
	<measure name="Close Price Sum" aggregation="SUM"  field="History Close"/>

	<postProcessor name="hide close" pluginKey="HIDE" underlyingMeasures="Close Price Sum">
		<properties>
			<entry key="hierarchy" value="Stock Symbol"/>
            <entry key="minimumDepth" value="1"/>
		</properties>
	</postProcessor>

	<postProcessor name="portfolio value" pluginKey="PORTFOLIOVALUE" underlyingMeasures="Number of Stock Sum, Close Price Sum">
		<properties>
			<entry key="leafLevels" value="Stock Symbol"/>
			<entry key="aggregationFunction" value="SUM"/>
		</properties>
	</postProcessor>

	<postProcessor name="portfolio global value" pluginKey="PORTFOLIOGLOBALVALUE" underlyingMeasures="portfolio value" >
		<properties>
			<entry key="leafLevels" value="Stock Symbol" />
			<entry key="aggregationFunction" value="SUM" />
			<entry key="levelToShift" value="Stock Symbol@Stock Symbol@Dimensions"/>
			<entry key="outputType" value="double" />
		</properties>
	</postProcessor>

	<postProcessor name="portfolio weight" pluginKey="PORTFOLIOWEIGHT" underlyingMeasures="portfolio value, portfolio global value">
		<properties>
			<entry key="leafLevels" value="Stock Symbol" />
			<entry key="aggregationFunction" value="SUM" />
			<entry key="outputType" value="double" />
		</properties>
	</postProcessor>

	<postProcessor name="cumulative return" pluginKey="Stream2Position" >
		<properties>
			<entry key="id" value="CURRENT" />
			<entry key="dateDimensionOrdinal" value="3" />
			<entry key="timeHierarchyName" value="Date" />
			<entry key="streamMeasureName" value="portfolio weight" />
			<entry key="positionType" value="CURRENT_STREAM" />
			<entry key="reverseDimensionOrder" value="false" />
		</properties>
	</postProcessor>

    <postProcessor name="Shift" pluginKey="PreviousValue">
        <properties>
            <entry key="streamMeasureName" value="portfolio weight"/>
            <entry key="timeHierarchyName" value="Date" />
        </properties>
    </postProcessor>

	<postProcessor name="period return" pluginKey="FORMULA" formatter="DOUBLE[#,###;-#,###]">
		<properties>
			<entry key="formula" value="aggregatedValue[portfolio weight],aggregatedValue[Shift],-"/>
		</properties>
	</postProcessor>

	<postProcessor name="Passthrough" pluginKey="PASSTHROUGH" underlyingMeasures="portfolio value" formatter="DOUBLE[#,###.00]" />

	<postProcessor name="performance" pluginKey="PERFORMANCE" underlyingMeasures="portfolio value">
		<properties>
			<entry key="levelToShift" value="Portfolio type"/>
		</properties>
	</postProcessor>

	<postProcessor name="exemple portfolio" pluginKey="ShiftToPortfolio" underlyingMeasures="portfolio value" >
		<properties>
			<entry key="leafLevels" value="Portfolio type" />
			<entry key="aggregationFunction" value="SUM" />
			<entry key="levelToShift" value="Portfolio type"/>
			<entry key="portfolioToShow" value="exemple"></entry>
			<entry key="outputType" value="double" />
		</properties>
	</postProcessor>

	<postProcessor name="benchmark portfolio" pluginKey="ShiftToPortfolio" underlyingMeasures="portfolio value" >
		<properties>
			<entry key="leafLevels" value="Portfolio type" />
			<entry key="aggregationFunction" value="SUM" />
			<entry key="levelToShift" value="Portfolio type"/>
			<entry key="portfolioToShow" value="bouh"></entry>
			<entry key="outputType" value="double" />
		</properties>
	</postProcessor>

<!--	<postProcessor name="period return" pluginKey="FORMULA" formatter="DOUBLE[#,###;-#,###]">-->
<!--		<properties>-->
<!--			<entry key="formula" value="aggregatedValue[exemple portfolio],aggregatedValue[benchmark portfolio],-"/>-->
<!--		</properties>-->
<!--	</postProcessor>-->

</measures>