<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<measures xmlns="http://www.quartetfs.com"
	xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.quartetfs.com ../activepivot-types.xsd">

	<!--Your measures and postprocessors here-->
	<measure field="Open" name="Open.Sum" aggregation="SUM" formatter="DOUBLE[#,###.00;-#,###.00]" folder="data" />
    <measure field="Open" name="Open.Avr" aggregation="AVG" formatter="DOUBLE[#,###.00;-#,###.00]" folder="data" />
    <measure field="HighValue" name="HighValue.Sum" aggregation="SUM" formatter="DOUBLE[#,###.00;-#,###.00]" folder="data" />
    <measure field="HighValue" name="HighValue.Avr" aggregation="AVG" formatter="DOUBLE[#,###.00;-#,###.00]" folder="data" />
    <measure field="LowValue" name="LowValue.Sum" aggregation="SUM" formatter="DOUBLE[#,###.00;-#,###.00]" folder="data" />
    <measure field="LowValue" name="LowValue.Avg" aggregation="AVG" formatter="DOUBLE[#,###.00;-#,###.00]" folder="data" />
    <measure field="Close" name="Close.Sum" aggregation="SUM" formatter="DOUBLE[#,###.00;-#,###.00]" folder="data" />
    <measure field="Close" name="Close.Avg" aggregation="AVG" folder="data" />
    <measure field="Volume" name="Volume.Sum" aggregation="SUM" formatter="INT[#,###;-#,###]" folder="data" />
    <measure field="AdjClose" name="AdjClose.Sum" aggregation="SUM" formatter="DOUBLE[#,###.00;-#,###.00]" folder="data" />
    <measure field="AdjClose" name="AdjClose.Avg" aggregation="AVG" formatter="DOUBLE[#,###.00;-#,###.00]" folder="data" />
    <measure field="NumberStocks" name="NumberStocks" formatter="INT[#,###;-#,###]" folder="data" />


    <!-- do not calculate the sum for -->
    <postProcessor name="minDepthOpenSum" pluginKey="MINIMUM_DEPTH" underlyingMeasures="Open.Sum" folder="data" formatter="DOUBLE[#,###.00;-#,###.00]">
        <properties>
            <entry key="hierarchyName" value="StockSymbol" />
            <entry key="minimumDepth" value="1" />
        </properties>
    </postProcessor>

    <postProcessor name="minDepthCloseSum" pluginKey="MINIMUM_DEPTH" underlyingMeasures="Close.Sum" folder="data" formatter="DOUBLE[#,###.00;-#,###.00]">
        <properties>
            <entry key="hierarchyName" value="StockSymbol" />
            <entry key="minimumDepth" value="1" />
        </properties>
    </postProcessor>

    <!-- version location dependent
    <postProcessor name="portfolioValue" pluginKey="PORTFOLIO_VALUE" folder="postProc" underlyingMeasures="NumberStocks,Close.Avg">
        <properties>
            <entry key="DimensionName" value="Sector@SectorDimension@SectorDimension" />
        </properties>
    </postProcessor>-->

    <postProcessor name="portfolioValue" pluginKey="DYNAMIC_PORTFOLIO_VALUE" underlyingMeasures="NumberStocks,Close.Avg" folder="postProc">
        <properties><!-- useful for total post processor -->
            <entry key="leafLevels" value="StockSymbol@StockSymbol@StockSymbol" /> <!-- level used by the total post processor -->
            <entry key="aggregatedFunctions" value="SUM" /> <!-- aggregation function used by the total post processor -->
        </properties>
    </postProcessor>


    <postProcessor name="TotalPortfolioValue" pluginKey="TOTAL_PORTFOLIO_VALUE" underlyingMeasures="portfolioValue" folder="postProc">
        <properties>
            <!-- needs to be the same as the displayed dimension in excel or active UI (calculus will be false otherwise)-->
            <entry key="levelToShift" value="Sector@SectorHierarchy@SectorDimension" /> <!-- not necessary to write the whole hierarchy if "Company name" is unique -->

        </properties>
    </postProcessor>



    <postProcessor name="PortfolioValueWeights" pluginKey="FORMULA" folder="postProc">
        <properties>
            <entry key="formula" value="aggregatedValue[portfolioValue],aggregatedValue[TotalPortfolioValue],int[0],div" /> <!-- numerator, denominator, value if division by 0, operator -->
        </properties>
    </postProcessor>


    <postProcessor name="PostfolioValueWeightBis" pluginKey="PORTFOLIO_WEIGHT" underlyingMeasures="portfolioValue,TotalPortfolioValue" folder="postProc">
        <properties>
            <entry key="weightName" value="WeightEvaluator"></entry>
        </properties>
    </postProcessor>

    <postProcessor name="PeriodReturn" pluginKey="PERIOD_RETURN" folder="postProc" formatter="DOUBLE[#,###.00;-#,###.00]">
        <properties>
            <entry key="timeHierarchyName" value="TimeHierarchy" />
            <entry key="streamMeasureName" value="Close.Avg" />
            <entry key="positionType" value="CURRENT_STREAM" />
        </properties>

    </postProcessor>

    <postProcessor name="CumulativeReturn" pluginKey="CUMULATIVE_RETURN" folder="postProc" formatter="DOUBLE[#,###.00;-#,###.00]">
        <properties>
            <entry key="timeHierarchyName" value="TimeHierarchy " />
            <entry key="streamMeasureName" value="Close.Avg" />
            <entry key="positionType" value="CURRENT_STREAM" />
        </properties>
    </postProcessor>


    <postProcessor name="ExempleValues" pluginKey="PORTFOLIO_CHOOSE" underlyingMeasures="portfolioValue">
        <properties>
            <entry key="levelToShift" value="PortfolioType@PortfolioType@PortfolioType" />
            <entry key="portfolioType" value="exemple" />
            <entry key="hierarchyName" value="PortfolioType" />
        </properties>
    </postProcessor>


    <postProcessor name="BenchmarkValues" pluginKey="PORTFOLIO_CHOOSE" underlyingMeasures="portfolioValue">
        <properties>
            <entry key="levelToShift" value="PortfolioType@PortfolioType@PortfolioType" />
            <entry key="portfolioType" value="benchmark" />
            <entry key="hierarchyName" value="PortfolioType" />
        </properties>
    </postProcessor>

    <postProcessor name="Performance" pluginKey="FORMULA" folder="postProc" >
        <properties>
            <entry key="formula" value="aggregatedValue[ExempleValues],aggregatedValue[BenchmarkValues],-" />
        </properties>
    </postProcessor>

    <postProcessor name="RelativePerformance" pluginKey="FORMULA" folder="postProc" >
        <properties>
            <entry key="formula" value="((aggregatedValue[ExempleValues],aggregatedValue[BenchmarkValues],-),aggregatedValue[BenchmarkValues],int[0],div),int[100],*" />
        </properties>
    </postProcessor>

    <postProcessor name="USD-EUR close value" pluginKey="FOREX" folder="postProc" underlyingMeasures="Close.Avg" formatter="DOUBLE[#,###.00;-#,###.00]">
        <properties>
            <entry key="referenceCurrency" value="USD" />
            <entry key="targetCurrency" value="EUR" />
        </properties>
    </postProcessor>

    <postProcessor name="JPY-USD close value" pluginKey="FOREX" folder="postProc" underlyingMeasures="Close.Avg" formatter="DOUBLE[#,###.00;-#,###.00]">
        <properties>
            <entry key="referenceCurrency" value="JPY" />
            <entry key="targetCurrency" value="USD" />
        </properties>
    </postProcessor>

    <postProcessor name="EUR-USD close value" pluginKey="FOREX" folder="postProc" underlyingMeasures="Close.Avg" formatter="DOUBLE[#,###.00;-#,###.00]">
        <properties>
            <entry key="referenceCurrency" value="EUR" />
            <entry key="targetCurrency" value="USD" />
        </properties>
    </postProcessor>
</measures>