<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<measures xmlns="http://www.quartetfs.com"
	xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.quartetfs.com ../activepivot-types.xsd">
	
	<!--Your measures and postprocessors here-->
	<measure name="Quantity" field="Quantity" folder="quantities" aggregationFunctions="SUM" />
	<measure name="Volume.Sum" field="Volume" folder="quantities" aggregationFunctions="SUM" />

	<measure name="OpenPrice.Avg" field="OpenPrice" aggregationFunctions="AVG" visible="false" />
	<measure name="HighPrice.Avg" field="HighPrice" folder="Price" aggregationFunctions="AVG" visible="false" />
	<measure name="LowPrice.Avg" field="LowPrice" folder="Price" aggregationFunctions="AVG" visible="false" />
	<measure name="ClosePrice.Avg" field="ClosePrice" folder="Price" aggregationFunctions="AVG" visible="false" />

    <measure name="ClosePriceCustomData" field="ClosePrice(Index)" aggregationFunctions="AVG" visible="false"/>
	<postProcessor name="ClosePrice_CustomData" pluginKey="MINIMUM_DEPTH" underlyingMeasures="ClosePriceCustomData">
		<properties>
			<entry key="hierarchyName" value="StockSymbol"/>
			<entry key="minimumDepth" value="1"/>
		</properties>
	</postProcessor>

	<postProcessor name="ClosePrice" pluginKey="MINIMUM_DEPTH" underlyingMeasures="ClosePrice.Avg" folder="Price">
		<properties>
			<entry key="hierarchyName" value="StockSymbol"/>
			<entry key="minimumDepth" value="1"/>
		</properties>
	</postProcessor>
	<postProcessor name="OpenPrice" pluginKey="MINIMUM_DEPTH" underlyingMeasures="OpenPrice.Avg" folder="Price">
		<properties>
			<entry key="hierarchyName" value="StockSymbol"/>
			<entry key="minimumDepth" value="1"/>
		</properties>
	</postProcessor>
	<postProcessor name="HighPrice" pluginKey="MINIMUM_DEPTH" underlyingMeasures="HighPrice.Avg" folder="Price">
		<properties>
			<entry key="hierarchyName" value="StockSymbol"/>
			<entry key="minimumDepth" value="1"/>
		</properties>
	</postProcessor>
	<postProcessor name="LowPrice" pluginKey="MINIMUM_DEPTH" underlyingMeasures="LowPrice.Avg" folder="Price">
		<properties>
			<entry key="hierarchyName" value="StockSymbol"/>
			<entry key="minimumDepth" value="1"/>
		</properties>
	</postProcessor>

	<postProcessor name="PortfolioValue" pluginKey="PORTFOLIOS" underlyingMeasures="Quantity,ClosePrice.Avg" folder="Price">
		<properties>
			<entry key="leafLevels" value="PortfolioType@PortfolioType@PortfolioType,StockSymbol@StockSymbol@StockSymbol," />
			<entry key="aggregationFunction" value="SUM" />
		</properties>
	</postProcessor>

	<postProcessor name="TotalPortfolioValue" pluginKey="SHIFT_VALUE" underlyingMeasures="PortfolioValue" visible="false">
		<properties>
			<entry key="hierarchyToShift" value="SectorClassification@SectorClassification,StockSymbol@StockSymbol"/>
		</properties>
	</postProcessor>

	<postProcessor name="RelativeWeight" pluginKey="WEIGHT" underlyingMeasures="TotalPortfolioValue,PortfolioValue">
	</postProcessor>

	<postProcessor name="PreviousDateValue" pluginKey="PreviousValue" visible="false">
		<properties>
			<entry key="streamMeasureName" value="PortfolioValue" />
			<entry key="timeHierarchyName" value="Date@Date@Time" />
		</properties>
	</postProcessor>

	<postProcessor name="PeriodReturn" pluginKey="PERIOD_RETURN" underlyingMeasures="PreviousDateValue,PortfolioValue" folder="performance">
	</postProcessor>

	<postProcessor name="CumulativeReturn" pluginKey="CUMULATIVE_RETURN" visible="true" folder="performance">
		<properties>
			<entry key="streamMeasureName" value="PortfolioValue" />
			<entry key="timeHierarchyName" value="Date@Date@Time" />
			<entry key="positionType" value="CURRENT_STREAM" />
		</properties>
	</postProcessor>


	<postProcessor name="BenchmarkReturn" pluginKey="SHIFT_VALUE" underlyingMeasures="PeriodReturn" visible="false">
		<properties>
			<entry key="hierarchyToShift" value="PortfolioType@PortfolioType"/>
			<entry key="shiftedValue" value="benchmark" />
		</properties>
	</postProcessor>
	<postProcessor name="PerformanceDiff1" pluginKey="FORMULA" folder="performance">
		<properties>
			<entry key="formula" value="aggregatedValue[PeriodReturn],aggregatedValue[BenchmarkReturn],-" />
		</properties>
	</postProcessor>
	<postProcessor name="PerformanceRelative1" pluginKey="FORMULA" folder="performance" >
		<properties>
			<entry key="formula" value="aggregatedValue[PeriodReturn],aggregatedValue[BenchmarkReturn],-,aggregatedValue[BenchmarkReturn],double[0],div,double[100],*" />
		</properties>
	</postProcessor>

	<postProcessor name="PerformanceDiff2" pluginKey="DIFF_PERFORMANCE" underlyingMeasures="PeriodReturn" folder="performance">
		<properties>
			<entry key="portfolioHierarchy" value="PortfolioType@PortfolioType" />
		</properties>
	</postProcessor>
	<postProcessor name="PerformanceRelative2" pluginKey="RELATIVE_PERFORMANCE" underlyingMeasures="PeriodReturn" folder="performance">
		<properties>
			<entry key="portfolioHierarchy" value="PortfolioType@PortfolioType" />
		</properties>
	</postProcessor>

</measures>